{"version":3,"sources":["NumberTable.js","App.js","serviceWorker.js","index.js"],"names":["Component","SimpleBlock","props","colorTable","Map","set","newState","fontSize","bColor","num","get","react_default","a","createElement","className","style","backgroundColor","NumberTable","_this2","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onKeyDown","e","keyCode","move","setTimeout","addNum","bind","assertThisInitialized","state","numTab","willAdd","score","emptyBlockList","i","j","push","getEmptyBlockList","length","_this3","setState","emptyBlockIndex","Math","round","random","_emptyBlockList$empty","slicedToArray","x","y","newNumTab","map","slice","dx","dy","t","moveFlag","firstMoveFlag","ix0","iy0","ix1","iy1","d_ix","d_iy","ix","iy","_this4","document","addEventListener","removeEventListener","row","justify","col","span","icon","type","onClick","handleClick","es_button","reset","Header","Layout","Footer","Content","Sider","Home","About","Game","NumberTable_NumberTable","AppRouter","BrowserRouter","layout","position","zIndex","width","menu","theme","mode","defaultSelectedKeys","lineHeight","Item","key","Link","to","padding","marginTop","background","minHeight","Route","path","exact","component","textAlign","bottom","left","right","App","App_AppRouter","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.8f7b74c2.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Button, List, Row, Col, Icon } from 'antd';\r\nimport { BrowserRouter, Route, Link } from \"react-router-dom\";\r\nimport './App.css';\r\n\r\n// 无效，function和class的区别有待研究\r\nclass NumberBlock extends Component {\r\n    constructor(props) {\r\n        console.log(\"create a block: \" + props)\r\n        super(props)\r\n        this.state = {\r\n            fontSize: 60,\r\n            bColor: \"#F0F8FF\"\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.updateStyle()\r\n    }\r\n\r\n    updateStyle() {\r\n        this.setState((state, props) => {\r\n\r\n            const newState = {\r\n                fontSize: 60,\r\n                bColor: \"#F0F8FF\"\r\n            }\r\n            if (props.num >= 100 && props.num <= 999) newState.fontSize = 50\r\n            if (props.num >= 1000 && props.num <= 9999) newState.fontSize = 40\r\n            if (props.num >= 2) {\r\n                newState.bColor = \"#FAEBD7\"\r\n            }\r\n            if (props.num >= 128) {\r\n                newState.bColor = \"#7FFFD4\"\r\n            }\r\n            console.log(\"setState!\" + newState)\r\n            return newState\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"NumberBlock\" style={{ fontSize: this.state.fontSize, backgroundColor: this.state.bColor }}>\r\n                {this.props.num}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nfunction SimpleBlock(props) {\r\n    let colorTable = new Map()\r\n    colorTable.set(0, \"#F0F8FF\")\r\n    colorTable.set(2, \"#FAEBD7\")\r\n    colorTable.set(4, \"#FAEBD7\")\r\n    colorTable.set(8, \"#7FFFD4\")\r\n    colorTable.set(16, \"#7FFFD4\")\r\n    colorTable.set(32, \"Chartreuse\")\r\n    colorTable.set(64, \"Chartreuse\")\r\n    colorTable.set(128, \"SandyBrown\")\r\n    colorTable.set(256, \"SandyBrown\")\r\n    colorTable.set(512, \"red\")\r\n    colorTable.set(1024, \"red\")\r\n    colorTable.set(2048, \"red\")\r\n    const newState = {\r\n        fontSize: 60,\r\n        bColor: \"#F0F8FF\"\r\n    }\r\n\r\n    if (props.num >= 100 && props.num <= 999) newState.fontSize = 50\r\n    if (props.num >= 1000 && props.num <= 9999) newState.fontSize = 40\r\n    newState.bColor = colorTable.get(props.num)\r\n    return (\r\n        <div className=\"SimpleBlock\" style={{\r\n            fontSize: newState.fontSize,\r\n            backgroundColor: newState.bColor\r\n        }}>\r\n            {props.num != 0 ? props.num : \"\"}\r\n        </div>\r\n    )\r\n}\r\n\r\nclass NumberTable extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            numTab: [[2, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]],\r\n            willAdd: true,\r\n            score: 2\r\n        }\r\n    }\r\n\r\n    getEmptyBlockList(state) {\r\n        let emptyBlockList = []\r\n        for (let i = 0; i < 4; i++) {\r\n            for (let j = 0; j < 4; j++) {\r\n                if (state.numTab[i][j] == 0) {\r\n                    emptyBlockList.push([i, j])\r\n                }\r\n            }\r\n        }\r\n        return emptyBlockList\r\n    }\r\n\r\n    checkGameOver() {\r\n        const emptyBlockList = this.getEmptyBlockList(this.state)\r\n        if (emptyBlockList.length == 0) {\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n\r\n    addNum() {\r\n        this.setState((state, props) => {\r\n            if (!state.willAdd) {\r\n                return state\r\n            }\r\n            //console.log(\"before add\")\r\n            //state.numTab.forEach(line => { console.log(line) })\r\n            const emptyBlockList = this.getEmptyBlockList(state)\r\n            const emptyBlockIndex = Math.round(Math.random() * (emptyBlockList.length - 1))\r\n            const [x, y] = emptyBlockList[emptyBlockIndex]\r\n            const newNumTab = state.numTab.map(x => x.slice())\r\n            newNumTab[x][y] = Math.random() > 0.8 ? 4 : 2\r\n            return {\r\n                numTab: newNumTab,\r\n                score: state.score + newNumTab[x][y]\r\n            }\r\n        })\r\n    }\r\n\r\n    move(dx, dy) {\r\n        this.setState((state, props) => {\r\n            const newNumTab = state.numTab.map(t => t.slice())\r\n            let moveFlag = false // 变动标记，若迭代过程中有变动，则设为true\r\n            let firstMoveFlag = false // 是否至少有一次变动\r\n            let ix0 = 0, iy0 = 0\r\n            let ix1 = 4, iy1 = 4\r\n            let d_ix = 1, d_iy = 1\r\n            if (dx == 0) { // 左右方向的合并\r\n                if (dy == 1) {// 向右合并\r\n                    iy0 = 3\r\n                    iy1 = -1\r\n                    d_iy = -1\r\n                }\r\n            } else { // 上下方向的合并\r\n                if (dx == 1) {// 向下合并\r\n                    ix0 = 3\r\n                    ix1 = -1\r\n                    d_ix = -1\r\n                }\r\n            }\r\n            do {\r\n                // 先把所有方块移动到相应的位置\r\n                moveFlag = false\r\n                for (let ix = ix0; ix != ix1; ix += d_ix) {\r\n                    for (let iy = iy0; iy != iy1; iy += d_iy) {\r\n                        let x = ix\r\n                        let y = iy\r\n                        while (x + dx >= 0 && x + dx < 4 && y + dy >= 0 && y + dy < 4) {\r\n                            if (newNumTab[x][y] != 0 && newNumTab[x + dx][y + dy] == 0) {// 若自身不为零且前方的方块为零，则移动过去\r\n                                newNumTab[x + dx][y + dy] = newNumTab[x][y]\r\n                                newNumTab[x][y] = 0\r\n                                moveFlag = true\r\n                                firstMoveFlag = true\r\n                            }\r\n                            x += dx\r\n                            y += dy\r\n                        }\r\n                    }\r\n                }\r\n                //console.log(\"before merge\")\r\n                //newNumTab.forEach(line => {console.log(line)})\r\n                // 然后再执行合并操作\r\n                for (let ix = ix0; ix != ix1; ix += d_ix) {\r\n                    for (let iy = iy0; iy != iy1; iy += d_iy) {\r\n                        let x = ix\r\n                        let y = iy\r\n                        while (x + dx >= 0 && x + dx < 4 && y + dy >= 0 && y + dy < 4) {\r\n                            if (newNumTab[x + dx][y + dy] != 0 && newNumTab[x + dx][y + dy] == newNumTab[x][y]) {// 若前方的方块数字与自己相同且不为零，则合并过去\r\n                                newNumTab[x + dx][y + dy] += newNumTab[x][y]\r\n                                newNumTab[x][y] = 0\r\n                                moveFlag = true\r\n                                firstMoveFlag = true\r\n                            }\r\n                            x += dx\r\n                            y += dy\r\n                        }\r\n                    }\r\n                }\r\n            } while (moveFlag) // 上一轮迭代有变动，继续迭代\r\n            return {\r\n                numTab: newNumTab,\r\n                willAdd: firstMoveFlag,\r\n                score: state.score\r\n            }\r\n        })\r\n    }\r\n\r\n    handleClick(dx, dy) {\r\n        return (e) => {\r\n            this.move(dx, dy)\r\n            setTimeout(this.addNum.bind(this), 100)\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        document.addEventListener(\"keydown\", this.onKeyDown)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener(\"keydown\", this.onKeyDown)\r\n    }\r\n\r\n    onKeyDown = (e) => {\r\n        switch (e.keyCode) {\r\n            case 38:\r\n                //上\r\n                this.move(-1, 0)\r\n                setTimeout(this.addNum.bind(this), 100)\r\n                break\r\n            case 40:\r\n                //下\r\n                this.move(1, 0)\r\n                setTimeout(this.addNum.bind(this), 100)\r\n                break\r\n            case 37:\r\n                //左\r\n                this.move(0, -1)\r\n                setTimeout(this.addNum.bind(this), 100)\r\n                break\r\n            case 39:\r\n                //右\r\n                this.move(0, 1)\r\n                setTimeout(this.addNum.bind(this), 100)\r\n                break\r\n            default:\r\n                break\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        this.setState({\r\n            numTab: [[2, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]],\r\n            willAdd: true,\r\n            score: 2\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"NumberTable\">\r\n                <Row justify=\"center\">\r\n                    <Col span={6}><SimpleBlock num={this.state.numTab[0][0]} /></Col>\r\n                    <Col span={6}><SimpleBlock num={this.state.numTab[0][1]} /></Col>\r\n                    <Col span={6}><SimpleBlock num={this.state.numTab[0][2]} /></Col>\r\n                    <Col span={6}><SimpleBlock num={this.state.numTab[0][3]} /></Col>\r\n                </Row>\r\n                <Row justify=\"center\">\r\n                    <Col span={6}><SimpleBlock num={this.state.numTab[1][0]} /></Col>\r\n                    <Col span={6}><SimpleBlock num={this.state.numTab[1][1]} /></Col>\r\n                    <Col span={6}><SimpleBlock num={this.state.numTab[1][2]} /></Col>\r\n                    <Col span={6}><SimpleBlock num={this.state.numTab[1][3]} /></Col>\r\n                </Row>\r\n                <Row justify=\"center\">\r\n                    <Col span={6}><SimpleBlock num={this.state.numTab[2][0]} /></Col>\r\n                    <Col span={6}><SimpleBlock num={this.state.numTab[2][1]} /></Col>\r\n                    <Col span={6}><SimpleBlock num={this.state.numTab[2][2]} /></Col>\r\n                    <Col span={6}><SimpleBlock num={this.state.numTab[2][3]} /></Col>\r\n                </Row>\r\n                <Row justify=\"center\">\r\n                    <Col span={6}><SimpleBlock num={this.state.numTab[3][0]} /></Col>\r\n                    <Col span={6}><SimpleBlock num={this.state.numTab[3][1]} /></Col>\r\n                    <Col span={6}><SimpleBlock num={this.state.numTab[3][2]} /></Col>\r\n                    <Col span={6}><SimpleBlock num={this.state.numTab[3][3]} /></Col>\r\n                </Row>\r\n                <h1>Score = {this.state.score}</h1>\r\n                <div><Icon type=\"arrow-up\" onClick={this.handleClick(-1, 0).bind(this)} /></div>\r\n                <div>\r\n                    <Icon type=\"arrow-left\" onClick={this.handleClick(0, -1).bind(this)} />\r\n                    <span>-----</span>\r\n                    <Icon type=\"arrow-right\" onClick={this.handleClick(0, 1).bind(this)} />\r\n                </div>\r\n                <div><Icon type=\"arrow-down\" onClick={this.handleClick(1, 0).bind(this)} /></div>\r\n                <div>________</div>\r\n                <Button onClick={this.reset.bind(this)}>Reset</Button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport {NumberTable}","import React, { Component } from 'react';\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport { Layout, Menu, Breadcrumb } from 'antd';\n\nimport { NumberTable } from './NumberTable.js'\nimport './App.css';\n\nconst {\n  Header, Footer, Sider, Content,\n} = Layout\n\n\nconst Home = () => (\n  <div>\n    <h2>主页</h2>\n    <p>1781的小提琴的react测试页面</p>\n  </div>\n)\nconst About = () => (\n  <div>\n    <h2>关于</h2>\n    <p>1781的小提琴的react测试页面</p>\n  </div>\n)\nconst Game = () => (\n  <div className=\"Game\">\n    <h1>2048 Game</h1>\n    <NumberTable />\n  </div>\n)\n\nconst AppRouter = () => (\n  <Router>\n    <Layout>\n      <Header style={{ position: 'fixed', zIndex: 1, width: '100%' }}>\n        <Menu\n          theme=\"dark\"\n          mode=\"horizontal\"\n          defaultSelectedKeys={['1']}\n          style={{ lineHeight: '64px' }}\n        >\n          <Menu.Item key='1'>\n            <Link to=\"/\">Home</Link>\n          </Menu.Item>\n          <Menu.Item key='2'>\n            <Link to=\"/about/\">About</Link>\n          </Menu.Item>\n          <Menu.Item key='3'>\n            <Link to=\"/game/\">Game</Link>\n          </Menu.Item>\n        </Menu>\n      </Header>\n      <Content style={{ padding: '0 50px', marginTop: 64 }}>\n        <div style={{ background: '#fff', padding: 24, minHeight: 670 }}>\n          <Route path=\"/\" exact component={Home} />\n          <Route path=\"/about/\" component={About} />\n          <Route path=\"/game/\" component={Game} />\n        </div>\n\n      </Content>\n      <Footer style={{ textAlign: 'center', bottom: 0, left: 0, right: 0 }}>Footer</Footer>\n    </Layout>\n  </Router>\n);\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <AppRouter />\n      </div>\n    );\n  }\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}