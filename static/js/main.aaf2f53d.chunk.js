(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t,a){e.exports=a(260)},137:function(e,t,a){},260:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(6),s=a.n(c),o=(a(137),a(27)),l=a(28),i=a(31),m=a(29),u=a(30),d=a(271),h=a(265),E=a(273),b=a(272),f=a(270),p=a(267),v=a(269),y=a(129),k=a(22),j=a(263),O=a(264),w=a(14),g=a(261);a(55),n.Component;function T(e){var t=new Map;t.set(0,"#F0F8FF"),t.set(2,"#FAEBD7"),t.set(4,"#FAEBD7"),t.set(8,"#7FFFD4"),t.set(16,"#7FFFD4"),t.set(32,"Chartreuse"),t.set(64,"Chartreuse"),t.set(128,"SandyBrown"),t.set(256,"SandyBrown"),t.set(512,"red"),t.set(1024,"red"),t.set(2048,"red");var a={fontSize:60,bColor:"#F0F8FF"};return e.num>=100&&e.num<=999&&(a.fontSize=50),e.num>=1e3&&e.num<=9999&&(a.fontSize=40),a.bColor=t.get(e.num),r.a.createElement("div",{className:"SimpleBlock",style:{fontSize:a.fontSize,backgroundColor:a.bColor}},0!=e.num?e.num:"")}var N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).onKeyDown=function(e){switch(e.keyCode){case 38:a.move(-1,0),setTimeout(a.addNum.bind(Object(k.a)(Object(k.a)(a))),100);break;case 40:a.move(1,0),setTimeout(a.addNum.bind(Object(k.a)(Object(k.a)(a))),100);break;case 37:a.move(0,-1),setTimeout(a.addNum.bind(Object(k.a)(Object(k.a)(a))),100);break;case 39:a.move(0,1),setTimeout(a.addNum.bind(Object(k.a)(Object(k.a)(a))),100)}},a.state={numTab:[[2,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],willAdd:!0,score:2},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"getEmptyBlockList",value:function(e){for(var t=[],a=0;a<4;a++)for(var n=0;n<4;n++)0==e.numTab[a][n]&&t.push([a,n]);return t}},{key:"checkGameOver",value:function(){return 0==this.getEmptyBlockList(this.state).length}},{key:"addNum",value:function(){var e=this;this.setState(function(t,a){if(!t.willAdd)return t;var n=e.getEmptyBlockList(t),r=Math.round(Math.random()*(n.length-1)),c=Object(y.a)(n[r],2),s=c[0],o=c[1],l=t.numTab.map(function(e){return e.slice()});return l[s][o]=Math.random()>.8?4:2,{numTab:l,score:t.score+l[s][o]}})}},{key:"move",value:function(e,t){this.setState(function(a,n){var r=a.numTab.map(function(e){return e.slice()}),c=!1,s=!1,o=0,l=0,i=4,m=4,u=1,d=1;0==e?1==t&&(l=3,m=-1,d=-1):1==e&&(o=3,i=-1,u=-1);do{c=!1;for(var h=o;h!=i;h+=u)for(var E=l;E!=m;E+=d)for(var b=h,f=E;b+e>=0&&b+e<4&&f+t>=0&&f+t<4;)0!=r[b][f]&&0==r[b+e][f+t]&&(r[b+e][f+t]=r[b][f],r[b][f]=0,c=!0,s=!0),b+=e,f+=t;for(var p=o;p!=i;p+=u)for(var v=l;v!=m;v+=d)for(var y=p,k=v;y+e>=0&&y+e<4&&k+t>=0&&k+t<4;)0!=r[y+e][k+t]&&r[y+e][k+t]==r[y][k]&&(r[y+e][k+t]+=r[y][k],r[y][k]=0,c=!0,s=!0),y+=e,k+=t}while(c);return{numTab:r,willAdd:s,score:a.score}})}},{key:"handleClick",value:function(e,t){var a=this;return function(n){a.move(e,t),setTimeout(a.addNum.bind(a),100)}}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown)}},{key:"reset",value:function(){this.setState({numTab:[[2,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],willAdd:!0,score:2})}},{key:"render",value:function(){return r.a.createElement("div",{className:"NumberTable"},r.a.createElement(j.a,{justify:"center"},r.a.createElement(O.a,{span:6},r.a.createElement(T,{num:this.state.numTab[0][0]})),r.a.createElement(O.a,{span:6},r.a.createElement(T,{num:this.state.numTab[0][1]})),r.a.createElement(O.a,{span:6},r.a.createElement(T,{num:this.state.numTab[0][2]})),r.a.createElement(O.a,{span:6},r.a.createElement(T,{num:this.state.numTab[0][3]}))),r.a.createElement(j.a,{justify:"center"},r.a.createElement(O.a,{span:6},r.a.createElement(T,{num:this.state.numTab[1][0]})),r.a.createElement(O.a,{span:6},r.a.createElement(T,{num:this.state.numTab[1][1]})),r.a.createElement(O.a,{span:6},r.a.createElement(T,{num:this.state.numTab[1][2]})),r.a.createElement(O.a,{span:6},r.a.createElement(T,{num:this.state.numTab[1][3]}))),r.a.createElement(j.a,{justify:"center"},r.a.createElement(O.a,{span:6},r.a.createElement(T,{num:this.state.numTab[2][0]})),r.a.createElement(O.a,{span:6},r.a.createElement(T,{num:this.state.numTab[2][1]})),r.a.createElement(O.a,{span:6},r.a.createElement(T,{num:this.state.numTab[2][2]})),r.a.createElement(O.a,{span:6},r.a.createElement(T,{num:this.state.numTab[2][3]}))),r.a.createElement(j.a,{justify:"center"},r.a.createElement(O.a,{span:6},r.a.createElement(T,{num:this.state.numTab[3][0]})),r.a.createElement(O.a,{span:6},r.a.createElement(T,{num:this.state.numTab[3][1]})),r.a.createElement(O.a,{span:6},r.a.createElement(T,{num:this.state.numTab[3][2]})),r.a.createElement(O.a,{span:6},r.a.createElement(T,{num:this.state.numTab[3][3]}))),r.a.createElement("h1",null,"Score = ",this.state.score),r.a.createElement("div",null,r.a.createElement(w.a,{type:"arrow-up",onClick:this.handleClick(-1,0).bind(this)})),r.a.createElement("div",null,r.a.createElement(w.a,{type:"arrow-left",onClick:this.handleClick(0,-1).bind(this)}),r.a.createElement("span",null,"-----"),r.a.createElement(w.a,{type:"arrow-right",onClick:this.handleClick(0,1).bind(this)})),r.a.createElement("div",null,r.a.createElement(w.a,{type:"arrow-down",onClick:this.handleClick(1,0).bind(this)})),r.a.createElement("div",null,"________"),r.a.createElement(g.a,{onClick:this.reset.bind(this)},"Reset"))}}]),t}(n.Component),C=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"RussionBlock"},r.a.createElement("h2",null,"RussionBlock"))}}]),t}(n.Component),S=a(266),x=a(268);function F(e){return r.a.createElement("div",{class:"ChessBlock"},""!=e.num?e.num:"")}var K=new WebSocket("wss://47.96.184.227:80");function B(e){K.send(JSON.stringify(e))}var A=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(i.a)(this,Object(m.a)(t).call(this,e));for(var n=new Array(e.N),r=0;r<e.N;r++){n[r]=new Array(e.N);for(var c=0;c<e.N;c++)n[r][c]=""}return a.state={next:"X",board:n,sessionKey:""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"clearBoard",value:function(){for(var e=new Array(this.props.N),t=0;t<this.props.N;t++){e[t]=new Array(this.props.N);for(var a=0;a<this.props.N;a++)e[t][a]=""}this.setState(function(t){return{next:"X",board:e,sessionKey:t.sessionKey}})}},{key:"handleClick",value:function(e,t){var a=this;return function(){console.log("Click on "+e+","+t),a.setState(function(n,r){console.log("Next: "+n.next);var c=n.board.map(function(e){return e.slice()});"O"!=c[e][t]&&"X"!=c[e][t]&&(c[e][t]=n.next,console.log("set "+e+","+t+" "+c[e][t]));var s=n.next;return""!=c[e][t]&&(s="X"==c[e][t]?"O":"X",B({i:e,j:t,content:c[e][t],sessionKey:a.state.sessionKey})),console.log("newNext: "+s),{next:s,board:c,sessionKey:n.sessionKey}})}}},{key:"handleServerMsg",value:function(e){var t=e.data;console.log("receive msg from server: "+t);var a=JSON.parse(t);this.setState(function(e,t){var n=e.board.map(function(e){return e.slice()}),r=e.next;return""==n[a.i][a.j]&&(n[a.i][a.j]=a.content,r="X"==e.next?"O":"X"),{board:n,next:r,sessionKey:e.sessionKey}})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFields(function(e,a){e||(console.log("Received values of form: "+JSON.stringify(a)),t.setState(function(e){return{next:e.next,board:e.board,sessionKey:a.sessionKey}}),a.setup_session=!0,B(a),K.onmessage=t.handleServerMsg.bind(t))}),this.clearBoard()}},{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldDecorator;t.getFieldsError,t.getFieldError,t.isFieldTouched;return r.a.createElement("div",{className:"Main"},r.a.createElement(S.a,{layout:"inline",onSubmit:this.handleSubmit.bind(this)},r.a.createElement(S.a.Item,null,a("sessionKey")(r.a.createElement(x.a,{placeholder:"sessionKey"}))),r.a.createElement(S.a.Item,null,r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Submit"))),this.state.board.map(function(t,a){return r.a.createElement(j.a,{justify:"center",key:a},t.map(function(t,n){return r.a.createElement(O.a,{span:1,key:n,onClick:e.handleClick(a,n).bind(e)},r.a.createElement(F,{num:t}))}))}),r.a.createElement("h3",null," \u8f6e\u5230","X"==this.state.next?"\u9ed1\u65b9":"\u767d\u65b9","\u843d\u5b50 "))}}]),t}(n.Component);A=S.a.create()(A);var D=function(e){function t(e){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).call(this,e))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ChessTable"},r.a.createElement("h2",null,"\u4e94\u5b50\u68cb"),r.a.createElement(A,{N:24}))}}]),t}(n.Component),M=p.a.SubMenu,_=v.a.Header,I=(v.a.Footer,v.a.Sider,v.a.Content),X=function(){return r.a.createElement("div",{className:"Home"},r.a.createElement("h2",null,"\u4e3b\u9875"),r.a.createElement("p",null,"1781\u7684\u5c0f\u63d0\u7434\u7684react\u6d4b\u8bd5\u9875\u9762"))},z=function(){return r.a.createElement("div",{className:"About"},r.a.createElement("h2",null,"\u5173\u4e8e"),r.a.createElement("p",null,"1781\u7684\u5c0f\u63d0\u7434\u7684react\u6d4b\u8bd5\u9875\u9762"))},H=function(){return r.a.createElement("div",{className:"Game_2048"},r.a.createElement("h1",null,"2048 Game"),r.a.createElement(N,null))},J=function(){return r.a.createElement("div",{className:"NoMatch"},r.a.createElement("h2",null,"\u6ca1\u6709\u5339\u914d\u7684\u9875\u9762"))},L=function(){return r.a.createElement(d.a,null,r.a.createElement(v.a,null,r.a.createElement(_,{style:{position:"fixed",zIndex:1,width:"100%"}},r.a.createElement(p.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:[],style:{lineHeight:"64px"}},r.a.createElement(p.a.Item,{key:"1"},r.a.createElement(h.a,{to:"/"},"Home")),r.a.createElement(p.a.Item,{key:"2"},r.a.createElement(h.a,{to:"/about/"},"About")),r.a.createElement(M,{title:r.a.createElement("span",null," Game ")},r.a.createElement(p.a.Item,{key:"3"},r.a.createElement(h.a,{to:"/2048/"},"2048")),r.a.createElement(p.a.Item,{key:"4"},r.a.createElement(h.a,{to:"/russionblock/"},"RussionBlock")),r.a.createElement(p.a.Item,{key:"5"},r.a.createElement(h.a,{to:"/fivechess/"},"FiveChess"))))),r.a.createElement(I,{style:{padding:"0 50px",marginTop:64}},r.a.createElement("div",{style:{background:"#fff",padding:24,minHeight:500}},r.a.createElement(E.a,null,r.a.createElement(b.a,{path:"/",exact:!0,component:X}),r.a.createElement(b.a,{path:"/about/",exact:!0,component:z}),r.a.createElement(b.a,{path:"/2048/",exact:!0,component:H}),r.a.createElement(b.a,{path:"/russionblock/",exact:!0,component:C}),r.a.createElement(b.a,{path:"/fivechess/",exact:!0,component:D}),r.a.createElement(f.a,{from:"/*",to:"/"}),r.a.createElement(b.a,{component:J}))))))},R=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(L,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},55:function(e,t,a){}},[[132,2,1]]]);
//# sourceMappingURL=main.aaf2f53d.chunk.js.map